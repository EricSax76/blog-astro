---
import Layout from "../layouts/Layout.astro";
import { flowers } from "../data/flowers";

const archiveYears = [2026, 2017, 2016, 2015, 2014, 2013, 2012, 2011];
const newestArchiveYear = Math.max(...archiveYears);
const oldestArchiveYear = Math.min(...archiveYears);

const featuredFlowers = flowers.slice(0, 6).map((flower) => ({
  ...flower,
  summary:
    flower.desc.length > 130 ? `${flower.desc.slice(0, 127)}...` : flower.desc,
}));

const contentSections = [
  {
    title: "Catálogo floral",
    subtitle: `${flowers.length} flores documentadas`,
    description:
      "Ficha completa de cada esencia con estado emocional, transformación positiva y afirmación.",
    href: "/flores-de-bach",
    cta: "Explorar catálogo",
  },
  {
    title: "Biografía",
    subtitle: "Edward Bach · 1886 a 1936",
    description:
      "Recorrido por su legado médico y humano, desde su formación hasta el sistema completo de flores.",
    href: "/biografia",
    cta: "Leer biografía",
  },
  {
    title: "Archivo anual",
    subtitle: `De ${oldestArchiveYear} a ${newestArchiveYear}`,
    description:
      "Anuarios por año para revisar publicaciones históricas y nuevas entradas del blog.",
    href: `/archivo/${newestArchiveYear}`,
    cta: `Ir a ${newestArchiveYear}`,
  },
  {
    title: "Panel de autores",
    subtitle: "Publicación protegida",
    description:
      "Los autores autenticados pueden redactar nuevas entradas y enviarlas al anuario vigente.",
    href: "/publicar",
    cta: "Abrir panel",
  },
];

const timeline = [
  {
    year: "1886",
    title: "Orígenes en Moseley",
    text: "Nace Edward Bach y comienza una vida orientada a comprender el sufrimiento humano.",
  },
  {
    year: "1912",
    title: "Formación médica",
    text: "Se gradúa en Londres e integra cirugía, bacteriología y salud pública a su enfoque.",
  },
  {
    year: "1928",
    title: "Doce Curadores",
    text: "Identifica las primeras flores en sus caminatas y sienta las bases del sistema floral.",
  },
  {
    year: "1930-1934",
    title: "Sistema completo",
    text: "Completa las 38 esencias y formula Rescue Remedy con un método claro y replicable.",
  },
];
---

<Layout title="El Alma de las Flores | Landing del Blog">
  <section
    class="relative overflow-hidden rounded-[2.8rem] bg-transparent border-0 shadow-none px-7 py-12 md:px-12 md:py-16"
  >
    <div
      class="absolute inset-0 bg-cover bg-center opacity-60"
      style="background-image: url('/images/bach-flowers/agrimony.jpeg');"
      aria-hidden="true"
    ></div>
    <div class="absolute inset-0 bg-cream/65" aria-hidden="true"></div>

    <div class="relative z-10 max-w-4xl mx-auto text-center space-y-6">
      <h1 class="font-serif text-4xl md:text-6xl font-bold text-deep-green leading-tight">
        El Alma de las Flores
      </h1>
      <p class="text-lg text-deep-green/75 max-w-2xl mx-auto leading-relaxed">
        Un punto de entrada para explorar las 38 flores de Bach, comprender su
        origen histórico y seguir las publicaciones de la comunidad.
      </p>

      <div class="flex flex-wrap justify-center gap-3">
        <a
          href="/flores-de-bach"
          class="rounded-full bg-deep-green text-cream px-6 py-3 font-semibold hover:bg-deep-green/90 transition-colors"
        >
          Explorar flores
        </a>
        <a
          href={`/archivo/${newestArchiveYear}`}
          class="rounded-full border border-sage/40 text-deep-green px-6 py-3 font-semibold hover:bg-sage/10 transition-colors"
        >
          Leer anuario {newestArchiveYear}
        </a>
        <a
          href="/publicar"
          class="rounded-full border border-sage/40 text-deep-green px-6 py-3 font-semibold hover:bg-sage/10 transition-colors"
        >
          Acceso autores
        </a>
      </div>
    </div>
  </section>

  <section class="mt-20">
    <div class="text-center max-w-3xl mx-auto space-y-4">
      <p class="text-xs uppercase tracking-[0.3em] text-deep-green/60 font-semibold">
        Mapa del contenido
      </p>
      <h2 class="font-serif text-4xl md:text-5xl font-bold text-deep-green">
        Todo el blog, organizado por rutas claras
      </h2>
      <p class="text-deep-green/70 text-lg">
        Esta landing resume las páginas clave para leer, estudiar y publicar sin
        perder contexto.
      </p>
    </div>

    <div class="mt-10 grid md:grid-cols-2 xl:grid-cols-4 gap-6">
      {
        contentSections.map((section) => (
          <article class="bg-white/85 border border-sage/20 rounded-3xl p-6 shadow-sm shadow-sage/5 flex flex-col gap-4">
            <p class="text-xs uppercase tracking-[0.2em] text-sage font-semibold">
              {section.subtitle}
            </p>
            <h3 class="font-serif text-2xl font-bold text-deep-green">{section.title}</h3>
            <p class="text-sm text-deep-green/75 leading-relaxed flex-1">
              {section.description}
            </p>
            <a
              href={section.href}
              class="inline-flex items-center text-sm font-semibold text-sage hover:text-deep-green transition-colors"
            >
              {section.cta}
              <span class="ml-1" aria-hidden="true">→</span>
            </a>
          </article>
        ))
      }
    </div>
  </section>

  <section class="mt-20 grid lg:grid-cols-[1fr_1.1fr] gap-8 items-start">
    <article class="bg-white border border-sage/20 rounded-[2rem] p-7 md:p-9 space-y-5">
      <p class="text-xs uppercase tracking-[0.3em] text-deep-green/60 font-semibold">
        Fundamentos
      </p>
      <h2 class="font-serif text-3xl md:text-4xl font-bold text-deep-green">
        Principios que guían el proyecto
      </h2>
      <p class="text-deep-green/75 leading-relaxed">
        El enfoque editorial parte de la investigación de Edward Bach: simplicidad,
        individualidad y autocuración como base para comprender estados
        emocionales.
      </p>
      <ul class="space-y-3 text-sm text-deep-green/80">
        <li class="rounded-xl bg-cream/70 border border-sage/15 px-4 py-3">
          Simplicidad: contenido comprensible y aplicable.
        </li>
        <li class="rounded-xl bg-cream/70 border border-sage/15 px-4 py-3">
          Individualidad: cada persona vive un proceso emocional distinto.
        </li>
        <li class="rounded-xl bg-cream/70 border border-sage/15 px-4 py-3">
          Autocuración: observar emociones para recuperar equilibrio.
        </li>
      </ul>
      <a
        href="/biografia#bio-timeline"
        class="inline-flex items-center rounded-full border border-sage/30 px-5 py-2 text-sm font-semibold text-deep-green hover:bg-sage/10 transition-colors"
      >
        Ver línea de tiempo completa
      </a>
    </article>

    <article class="bg-deep-green text-cream rounded-[2rem] p-7 md:p-9">
      <p class="text-xs uppercase tracking-[0.3em] text-cream/70 font-semibold mb-5">
        Cronología esencial
      </p>
      <div class="space-y-4">
        {
          timeline.map((item) => (
            <div class="rounded-2xl border border-cream/20 bg-cream/5 p-4">
              <p class="font-serif text-2xl font-bold">{item.year}</p>
              <p class="font-semibold mt-1">{item.title}</p>
              <p class="text-sm text-cream/80 mt-1 leading-relaxed">{item.text}</p>
            </div>
          ))
        }
      </div>
    </article>
  </section>

  <section class="mt-20">
    <div class="flex flex-wrap items-end justify-between gap-4">
      <div class="space-y-2">
        <p class="text-xs uppercase tracking-[0.3em] text-deep-green/60 font-semibold">
          Muestra del catálogo
        </p>
        <h2 class="font-serif text-3xl md:text-4xl font-bold text-deep-green">
          Primeras flores para empezar a explorar
        </h2>
      </div>
      <a
        href="/flores-de-bach"
        class="rounded-full border border-sage/30 px-5 py-2 text-sm font-semibold text-deep-green hover:bg-sage/10 transition-colors"
      >
        Ver las 38 flores
      </a>
    </div>

    <div class="mt-8 grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
      {
        featuredFlowers.map((flower) => (
          <a href={`/flores-de-bach/${flower.slug}`} class="group block">
            <article class="h-full overflow-hidden rounded-3xl border border-sage/15 bg-white shadow-sm hover:-translate-y-1 hover:shadow-xl hover:shadow-sage/10 transition-all duration-300">
              <img
                src={flower.img}
                alt={`Flor de Bach ${flower.name}`}
                class="h-44 w-full object-cover transition-transform duration-700 group-hover:scale-105"
                loading="lazy"
              />
              <div class="p-5 space-y-2">
                <p class="text-xs uppercase tracking-[0.2em] text-sage font-semibold">
                  Esencia {flower.id}
                </p>
                <h3 class="font-serif text-2xl font-bold text-deep-green">{flower.name}</h3>
                <p class="text-xs italic text-deep-green/60">{flower.botanical}</p>
                <p class="text-sm text-deep-green/75 leading-relaxed">{flower.summary}</p>
              </div>
            </article>
          </a>
        ))
      }
    </div>
  </section>

  <section
    id="acceso-autores"
    class="mt-20 w-[90vw] mx-auto relative left-1/2 -translate-x-1/2 grid xl:grid-cols-[0.95fr_1.05fr] gap-8 items-start"
  >
    <article class="bg-white/85 border border-sage/20 rounded-[2rem] p-7 md:p-9 space-y-5">
      <p class="text-xs uppercase tracking-[0.3em] text-deep-green/60 font-semibold">
        Acceso protegido
      </p>
      <h2 class="font-serif text-3xl md:text-4xl font-bold text-deep-green">
        Zona de autores del blog
      </h2>
      <p class="text-deep-green/75 leading-relaxed">
        Si colaboras con el proyecto, inicia sesión o crea tu cuenta para
        publicar nuevas entradas en el anuario {newestArchiveYear}.
      </p>
      <ul class="space-y-3 text-sm text-deep-green/80">
        <li class="rounded-xl bg-cream/70 border border-sage/15 px-4 py-3">
          Registro e inicio de sesión mediante Firebase Auth.
        </li>
        <li class="rounded-xl bg-cream/70 border border-sage/15 px-4 py-3">
          Publicación de posts con imagen desde el panel de autor.
        </li>
        <li class="rounded-xl bg-cream/70 border border-sage/15 px-4 py-3">
          Visualización de entradas desde el anuario {newestArchiveYear}.
        </li>
      </ul>
      <a
        href="/publicar"
        class="inline-flex items-center rounded-full bg-deep-green px-5 py-2 text-sm font-semibold text-cream hover:bg-deep-green/90 transition-colors"
      >
        Ir al panel de publicación
      </a>
    </article>

    <article
      class="bg-white/85 border border-sage/20 rounded-[2.2rem] shadow-xl shadow-sage/5 p-7 md:p-10 space-y-6"
    >
      <header class="space-y-3">
        <h3 class="font-serif text-3xl md:text-4xl font-bold text-deep-green">
          Acceso de usuario
        </h3>
        <p class="text-deep-green/70">
          Accede desde páginas independientes para iniciar sesión o registrarte.
        </p>
      </header>

      <div class="space-y-4">
        <a
          href="/acceder"
          class="w-full inline-flex items-center justify-center rounded-full border border-sage/40 px-6 py-3 text-deep-green font-semibold hover:bg-sage/10 transition-colors"
        >
          Ir a Acceder
        </a>
        <a
          href="/registrate"
          class="w-full inline-flex items-center justify-center rounded-full bg-deep-green px-6 py-3 text-cream font-semibold hover:bg-deep-green/90 transition-colors"
        >
          Ir a Regístrate
        </a>
        <a
          href="/publicar"
          class="w-full inline-flex items-center justify-center rounded-full border border-sage/30 px-6 py-3 text-deep-green/80 font-semibold hover:bg-sage/10 transition-colors"
        >
          Abrir panel de publicación
        </a>
      </div>
    </article>

  </section>
</Layout>
